<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
        .li{
            font-size:16px;
        }
        img {
            width: 500px;
            height: 450px;
            background: url(loading.gif) 50% no-repeat;
            border: 1px solid black;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">

        <div>
            <div>
                <input type="hidden" id="displayname" />
                <ul id="discussion"></ul>

            </div>

        </div>
    </div>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery.min.js" ></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/signalr/signalR-client-1.0.0-alpha2-final.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <!--script src="signalr/hubs"></script-->
    <!--Add script to update the page and send messages.--> 
    <!--script
        src="http://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script-->
    <!--Add script to update the page and send messages.-->
    <script type="text/javascript">
        $(function () {
            alert(document.location.host);
            var transportType = signalR.TransportType.WebSockets;//can also be ServerSentEvents or LongPolling
            var logger = new signalR.ConsoleLogger(signalR.LogLevel.Information);
            var moderate = new signalR.HttpConnection('http://' + document.location.host + '/moderate', { transport: transportType, logger: logger });

            var connection = new signalR.HubConnection(moderate, logger);

//            var connection = new signalR.HubConnection('/moderate');

            // Create a function that the hub can call to broadcast messages.
            connection.on('broadcastMessage', function (name, message) {
                // Html encode display name and message.
                var encodedName = $('<div />').text(name).html();
                var encodedMsg = $('<div />').text(message).html();
                // Add the message to the page.
                $('#discussion').append('<li><strong>' + encodedName
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            });


            // Create a function that the hub can call to broadcast messages.
            connection.on('broadcastMessageModerator', function (name, message) {
                // Html encode display name and message.
                var encodedName = $('<div />').text(name).html();
                var encodedMsg = $('<div />').text(message).html();
                // Add the message to the page.
                $('#discussion').append('<li><strong>' + encodedName
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            });


            // Create a function that the hub can call to broadcast messages and image.
            connection.on('broadcastMessageImage', function (name, image) {
                // Html encode display name and message.
                var encodedName = $('<div />').text(name).html();

                // Add the message to the page.
               // $('#discussion').append('<li><strong>' + encodedName + '</strong>' + '</li>');

                //$('#discussion').append('<li><img src="' + image + '" />' + '</li>');
                $('#discussion').append('<div><img src="' + image + '" /></div>');

            });
            // Start the connection.
            connection.start().then(function () {
                $('#sendmessage').click(function () {
                    //// Call the Send method on the hub.
                    //connection.invoke('send', $('#displayname').val(), $('#message').val());
                    //// Clear text box and reset focus for next comment.
                    //$('#message').val('').focus();
                });
            });
        });
    </script>
</body>
</html>


<!--
    
<!DOCTYPE html>  
<html>  
  
<head>  
    <meta charset="utf-8" />  
    <title></title>  
</head>  
  
<body>  
    <h1 id="head1"></h1>  
    <div> <select id="formatType"> <option value="json">json</option> <option value="line">line</option> </select> <input type="button" id="connect" value="Connect" /> <input type="button" id="disconnect" value="Disconnect" /> </div>  
    <h4>To Everybody</h4>  
    <form class="form-inline">  
        <div class="input-append"> <input type="text" id="message-text" placeholder="Type a message, name or group" /> <input type="button" id="broadcast" class="btn" value="Broadcast" /> <input type="button" id="broadcast-exceptme" class="btn" value="Broadcast (All Except Me)" /> <input type="button" id="join" class="btn" value="Enter Name" /> <input type="button" id="join-group" class="btn" value="Join Group" /> <input type="button" id="leave-group" class="btn" value="Leave Group" /> </div>  
    </form>  
    <h4>To Me</h4>  
    <form class="form-inline">  
        <div class="input-append"> <input type="text" id="me-message-text" placeholder="Type a message" /> <input type="button" id="send" class="btn" value="Send to me" /> </div>  
    </form>  
    <h4>Private Message</h4>  
    <form class="form-inline">  
        <div class="input-prepend input-append"> <input type="text" name="private-message" id="private-message-text" placeholder="Type a message" /> <input type="text" name="user" id="target" placeholder="Type a user or group name" /> <input type="button" id="privatemsg" class="btn" value="Send to user" /> <input type="button" id="groupmsg" class="btn" value="Send to group" /> </div>  
    </form>  
    <ul id="message-list"></ul>  
</body>  
  
</html>  
<script src="signalr-client.js"></script>  
<script src="utils.js"></script>  
<script>  
    var isConnected = false;  
  
    function invoke(connection, method, ...args) {  
        if (!isConnected) {  
            return;  
        }  
        var argsArray = Array.prototype.slice.call(arguments);  
        connection.invoke.apply(connection, argsArray.slice(1)).then(result => {  
            console.log("invocation completed successfully: " + (result === null ? '(null)' : result));  
            if (result) {  
                addLine('message-list', result);  
            }  
        }).catch(err => {  
            addLine('message-list', err, 'red');  
        });  
    }  
  
    function getText(id) {  
        return document.getElementById(id).value;  
    }  
    let transportType = signalR.TransportType[getParameterByName('transport')] || signalR.TransportType.WebSockets;  
    document.getElementById('head1').innerHTML = signalR.TransportType[transportType];  
    let connectButton = document.getElementById('connect');  
    let disconnectButton = document.getElementById('disconnect');  
    disconnectButton.disabled = true;  
    var connection;  
    click('connect', event => {  
        connectButton.disabled = true;  
        disconnectButton.disabled = false;  
        let http = new signalR.HttpConnection(`http://${document.location.host}/hubs`, {  
            transport: transportType  
        });  
        connection = new signalR.HubConnection(http);  
        connection.on('Send', msg => {  
            addLine('message-list', msg);  
        });  
        connection.onClosed = e => {  
            if (e) {  
                addLine('message-list', 'Connection closed with error: ' + e, 'red');  
            } else {  
                addLine('message-list', 'Disconnected', 'green');  
            }  
        }  
        connection.start().then(() => {  
            isConnected = true;  
            addLine('message-list', 'Connected successfully', 'green');  
        }).catch(err => {  
            addLine('message-list', err, 'red');  
        });  
    });  
    click('disconnect', event => {  
        connectButton.disabled = false;  
        disconnectButton.disabled = true;  
        connection.stop().then(() => {  
            isConnected = false;  
        });  
    });  
    click('broadcast', event => {  
        let data = getText('message-text');  
        invoke(connection, 'Send', data);  
    });  
    click('join-group', event => {  
        let groupName = getText('message-text');  
        invoke(connection, 'JoinGroup', groupName);  
    });  
    click('leave-group', event => {  
        let groupName = getText('message-text');  
        invoke(connection, 'LeaveGroup', groupName);  
    });  
    click('groupmsg', event => {  
        let groupName = getText('target');  
        let message = getText('private-message-text');  
        invoke(connection, 'SendToGroup', groupName, message);  
    });  
    click('send', event => {  
        let data = getText('me-message-text');  
        invoke(connection, 'Echo', data);  
    });  
</script>  
      am using the current highest vesion in this example. Of course, the version number is likely to change every day. The latest version of the SignalR is not compatible with the .NET Core SDK 2.0 Preview 1 by default. When creating the project Microsoft.AspNetCore.All, this package version, modify the revised version number: Microsoft.AspNetCore.All 1.0.0-alpha-final.
You can also use .NET CLI to add the package reference.
dotnet add package Microsoft.AspNetCore.SignalR --version 1.0.0-alpha-final --source https://dotnet.myget.org/F/aspnetcore-dev/api/v3/index.json dotnet add package Microsoft.AspNetCore.SignalR.Http --version 0.0.1-alpha --source https://dotnet.myget.org/F/aspnetcore-dev/api/v3/index.json

     t is worth noting that there is no signalr-client.js in this document. There are two ways to bring it in the project.
The first way is to download the SignalR source code, find the Client-TS project, and compile the TypeScript.
The second way is relatively simple, i.e., through NPM.
npm install signalr-client --registry

-->